{"version":3,"sources":["1-scripts.js","2-form.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":["'use strict';\n\n/*===================================================================\n  GLOBAL FUNCTIONS\n=====================================================================*/\n\n/* VARS\n=====================================================================*/\nvar\n  screenMD = 768,\n  date = new Date(),\n  bodyWidth = document.body.offsetWidth;\n\n\n/* TESTING\n=====================================================================*/\nfunction isNum(elem) {\n  var val = elem.innerHTML || elem.value;\n  return !isNaN(parseInt(val)) && val !== '' && val !== ' ';\n}\n\nwindow.addEventListener('resize', function() {\n  bodyWidth = document.body.offsetWidth;\n});\n\n/*===================================================================*/\n\nvar isMobile = {\n  android: function android() {\n    return navigator.userAgent.match(/Android/i);\n  },\n  blackberry: function blackberry() {\n    return navigator.userAgent.match(/BlackBerry/i);\n  },\n  ios: function ios() {\n    return navigator.userAgent.match(/iPhone|iPad|iPod/i);\n  },\n  opera: function opera() {\n    return navigator.userAgent.match(/Opera Mini/i) || navigator.userAgent.match(/opr/i) && typeof window.orientation !== \"undefined\";\n  },\n  windows: function windows() {\n    return navigator.userAgent.match(/IEMobile/i);\n  },\n  any: function any() {\n    return isMobile.android() || isMobile.blackberry() || isMobile.ios() || isMobile.opera() || isMobile.windows();\n  }\n};\n\n\n/* EFFECTS\n=====================================================================*/\n// function bgPrlx(items, sizeX, sizeY, step) {\n// var elems = document.querySelectorAll(items);\n//\n//   if (isMobile.any()) {\n//     var scrolledY = Math.round(window.pageYOffset);\n//\n//     elems.forEach(function(elem) {\n//       elem.style.backgroundAttachment = 'scroll';\n//       elem.style.backgroundSize = sizeX + ' ' + sizeY;\n//       elem.style.backgroundPosition =\n//         'center ' +\n//         ((scrolledY - Math.round(elem.offsetTop)) / step) + 'px';\n//     });\n//   }\n// }\n\n/*===================================================================*/\n\n// function elemPrlx(e) {\n//   var elems = document.querySelectorAll('.js-moveTitle');\n//\n//   elems.forEach(function(el) {\n//     el.parentElement.addEventListener('mousemove', function(e) {\n//       if (!isMobile.any() && bodyWidth >= screenMD) {\n//         var elem = this.querySelector('.js-moveTitle');\n//\n//         elem.style.transform =\n//         'translate3d(' +\n//         (e.clientX / 4 - (elem.offsetWidth / 3)) + 'px, ' +\n//         (e.clientY / 8 - (elem.offsetHeight / 2)) + 'px, 0)';\n//       }\n//     });\n//   });\n// }\n\n\n/* MODAL windows\n=====================================================================*/\nvar modal = null,\n  modalTitle, modalContent;\n\nfunction checkListener(e) {\n  if (e.target === modal && e.target.classList.contains('active')) return hideModal();\n  if (e.keyCode === 27) return hideModal();\n}\n\nfunction showModal() {\n  if (modal === null) modal = document.querySelector('.js-modal');\n\n  modalTitle = modal.querySelector('.js-modalTitle');\n  modalContent = modal.querySelector('.js-modalContent');\n\n  modal.removeAttribute('aria-hidden');\n  modal.setAttribute('aria-modal', 'true');\n  modal.classList.add('active');\n\n  modal.querySelector('button[class$=\"-btnClose\"]').addEventListener('click', hideModal);\n  if (isMobile.ios()) {\n    modal.querySelector('button[class$=\"-btnClose\"]').addEventListener('touchstart', hideModal);\n    window.addEventListener('touchend', checkListener);\n  }\n  window.addEventListener('keydown', checkListener);\n  window.addEventListener('click', checkListener);\n}\n\nfunction hideModal() {\n  if (modal === null) return;\n\n  modal.setAttribute('aria-hidden', 'true');\n  modal.removeAttribute('aria-modal');\n  modal.classList.remove('active');\n\n  modal.querySelector('button[class$=\"-btnClose\"]').removeEventListener('click', hideModal);\n  if (isMobile.ios()) {\n    modal.querySelector('button[class$=\"-btnClose\"]').removeEventListener('touchstart', hideModal);\n    window.removeEventListener('touchend', checkListener);\n  }\n  window.removeEventListener('keydown', checkListener);\n  window.removeEventListener('click', checkListener);\n\n  modal = null;\n}\n\n\n/*===================================================================\n  OTHER SCRIPTS ONLOAD\n=====================================================================*/\ndocument.addEventListener('DOMContentLoaded', function() {\n\n  if (isMobile.opera()) alert('В браузере Opera Mini сайт может неправильно выглядеть и работать. Если это так - попробуйте воспользоваться другим браузером.');\n\n  // window.onscroll = function() {\n  //   bgPrlx('.js-bgPrlx', '100%', '140%', 5);\n  // };\n\n  // elemPrlx();\n\n\n  /* Modals\n  =====================================================================*/\n  var btnShow = document.querySelectorAll('.js-showModal');\n  btnShow.forEach(function(el) {\n    el.addEventListener('click', function(e) {\n      e.preventDefault();\n      if (e.target.hasAttribute('href')) {\n        modal = document.querySelector(e.target.getAttribute('href'));\n        showModal();\n      }\n    });\n  });\n\n\n  /* Responsive tables\n  =====================================================================*/\n  // (function() {\n  //   var\n  //     allTr = document.querySelectorAll('.js-table tr'),\n  //     labels = [];\n  //\n  //   allTr.forEach(function(tr) {\n  //     var childs = tr.children;\n  //\n  //     for (var i = 0; i < childs.length; i++) {\n  //       if (childs[i].tagName === 'TH') labels.push(childs[i].innerHTML);\n  //       else childs[i].dataset.label = labels[i];\n  //     };\n  //   });\n  // })();\n\n\n  /* Lazy loading\n  =====================================================================*/\n  (function() {\n    var\n      lazyLoadItems = document.querySelectorAll('.js-lazy'),\n      lazyLoadThrottleTimeout;\n\n    function lazyLoad() {\n      if (lazyLoadThrottleTimeout) clearTimeout(lazyLoadThrottleTimeout);\n\n      lazyLoadThrottleTimeout = setTimeout(function() {\n        lazyLoadItems.forEach(function(item) {\n          if (item.offsetTop < (window.innerHeight + window.pageYOffset)) {\n            if (item.tagName !== 'IMG' && item.tagName !== 'IFRAME') item.style.backgroundImage = 'url(' + item.dataset.src + ')';\n            item.src = item.dataset.src;\n            item.classList.remove('js-lazy');\n          }\n        });\n\n        if (lazyLoadItems.length === 0) {\n          document.removeEventListener('scroll', lazyLoad);\n          window.removeEventListener('resize', lazyLoad);\n          window.removeEventListener('orientationChange', lazyLoad);\n        }\n      }, 20);\n    }\n\n    document.addEventListener('scroll', lazyLoad);\n    window.addEventListener('resize', lazyLoad);\n    window.addEventListener('orientationChange', lazyLoad);\n  })();\n\n\n\n  /* Smooth scrolling\n  =====================================================================*/\n  (function() {\n    var anchors = document.querySelectorAll('a[href~=\"#\"]');\n\n    for (var i = 0; i < anchors.length; i++) {\n      anchors[i].addEventListener('click', function(e) {\n        e.preventDefault();\n        document.querySelector(this.getAttribute('href')).scrollIntoView({\n          behavior: 'smooth',\n          block: 'start'\n        });\n      });\n    }\n  })();\n\n\n  /* Button to scroll Up or Down\n  =====================================================================*/\n  // (function() {\n  //   var\n  //     btn = document.querySelector('.js-scrollBtn'),\n  //     icon = btn.querySelector('svg'),\n  //     flag;\n  //\n  //   icon.style.transform = 'rotate(180deg)';\n  //\n  //   function setScroll() {\n  //     if (scrollThrottleTimeout) clearTimeout(scrollThrottleTimeout);\n  //\n  //     var scrollThrottleTimeout = setTimeout(function() {\n  //       if (window.pageYOffset <= document.body.scrollHeight / 1.75) {\n  //         icon.style.transform = 'rotate(180deg)';\n  //         flag = true;\n  //       } else {\n  //         icon.style.transform = 'rotate(0deg)';\n  //         flag = false;\n  //       }\n  //     }, 20);\n  //   }\n  //\n  //   document.addEventListener('scroll', setScroll);\n  //\n  //   function moveTo(e) {\n  //     e.preventDefault();\n  //     if (flag) window.scrollBy(0, window.innerHeight);\n  //     else window.scrollTo(0, 0);\n  //   }\n  //\n  //   btn.addEventListener('click', moveTo);\n  // })();\n\n  (function() {\n    var btn = document.querySelector('.js-scrollBtn');\n\n    btn.addEventListener('click', function() {\n      window.scrollBy(0, window.innerHeight);\n    });\n  })();\n\n\n  /* Calls from link for mobile devices only\n  =====================================================================*/\n  (function() {\n    if (isMobile.any() && bodyWidth <= screenMD) {\n      var linksPhone = document.querySelectorAll('.js-linkPhone');\n\n      linksPhone.forEach(function(el) {\n        el.href = 'tel:' + el.dataset.phone;\n      });\n    }\n  })();\n\n\n  /* Nav on side\n  =====================================================================*/\n  (function() {\n    var\n      navBlocks = document.querySelectorAll('.js-navBlock'),\n      navLinks = document.querySelectorAll('.js-sideNav a');\n\n    function removeClass() {\n      navLinks.forEach(function(link) {\n        link.classList.remove('active');\n      });\n    }\n\n    document.addEventListener('scroll', function() {\n      navBlocks.forEach(function(block, i) {\n        if (window.pageYOffset >= block.offsetTop - window.innerHeight * 0.3) {\n          removeClass();\n          navLinks[i].classList.add('active');\n        }\n      });\n    });\n  })();\n\n\n  /* Updating year in footer\n  =====================================================================*/\n  (function() {\n    var elem = document.querySelector('.js-year');\n    elem.innerHTML = ' ' + date.getFullYear() + ' ';\n  })();\n\n\n  /* Main nav\n  =====================================================================*/\n  (function() {\n    var\n      btnShow = document.querySelector('.js-showMenu '),\n      btnClose = document.querySelector('.js-closeMenu'),\n      menu = document.querySelector('.js-mobMenu'),\n      menuItems = menu.querySelectorAll('a, button');\n\n    function checkListener(e) {\n      if (e.offsetX < e.target.offsetWidth && menu.classList.contains('active')) return closeMenu();\n      if (e.keyCode === 27) return closeMenu();\n    }\n\n    function showMenu() {\n      menu.classList.add('active');\n      btnShow.setAttribute('aria-hidden', true);\n      btnClose.removeAttribute('aria-hidden');\n\n      if (isMobile.ios()) menu.addEventListener('touchend', closeMenu);\n      window.addEventListener('keydown', checkListener);\n      window.addEventListener('click', checkListener);\n    }\n\n    function closeMenu() {\n      menu.classList.remove('active');\n      btnClose.setAttribute('aria-hidden', true);\n      btnShow.removeAttribute('aria-hidden');\n\n      if (isMobile.ios()) menu.removeEventListener('touchend', closeMenu);\n      window.removeEventListener('keydown', checkListener);\n      window.removeEventListener('click', checkListener);\n    }\n\n    window.addEventListener('resize', function() {\n      if (bodyWidth <= screenMD) btnShow.removeAttribute('aria-hidden');\n      else btnShow.setAttribute('aria-hidden', true);\n    });\n\n    btnShow.addEventListener('click', showMenu);\n    menuItems.forEach(function(item) {\n      item.addEventListener('click', closeMenu);\n    });\n    if (isMobile.ios()) {\n      btnShow.addEventListener('touchstart', showMenu);\n      btnClose.addEventListener('touchstart', closeMenu);\n    }\n  })();\n\n});","/*===================================================================\n  Forms\n=====================================================================*/\n'use strict';\n\n(function() {\n  document.addEventListener('DOMContentLoaded', function() {\n    var\n      forms = document.querySelectorAll('.js-validate'),\n      inputPhones = document.querySelectorAll('.js-inpPhone'),\n      resets = document.querySelectorAll('.js-btnReset');\n\n    /*===================================================================*/\n\n    function removeStyles(form) {\n      form.classList.remove('formError');\n      form.querySelectorAll('input').forEach(function(el) {\n        el.classList.remove('fieldError');\n        el.classList.remove('fieldValid');\n      });\n    }\n\n    function addStyles(elem, state) {\n      if (state) {\n        elem.classList.remove('fieldError');\n        elem.classList.add('fieldValid');\n        return true;\n      } else {\n        elem.classList.remove('fieldValid');\n        elem.classList.add('fieldError');\n        return false;\n      }\n    }\n\n    inputPhones.forEach(function(el) {\n      el.addEventListener('blur', function() {\n        if (this.value.length === 10) {\n          var x = this.value.replace(/\\D/g, '').match(/(\\d{3})(\\d{3})(\\d{2})(\\d{2})/);\n          this.value = '(' + x[1] + ') ' + x[2] + '-' + x[3] + '-' + x[4];\n        }\n      });\n    });\n\n    /*===================================================================*/\n\n    function showResponse(response) {\n      showModal();\n      modalTitle.innerHTML = modalTitle.innerHTML;\n      modalContent.innerHTML = '<b>' + response + '</b>';\n    }\n\n    function sendRequest(someForm) {\n      var\n        xhr = new XMLHttpRequest(),\n        formData = new FormData(someForm);\n\n      if (!xhr) {\n        // showResponse('Cannot create an XMLHTTP instance.');\n        showResponse('Не удалось установить XMLHTTP соединение.');\n        return false;\n      }\n\n      xhr.onreadystatechange = function() {\n        if (this.readyState === 4) {\n          if (this.status === 200) showResponse(this.responseText);\n          else showResponse(this.responseText);\n        }\n      };\n\n      xhr.open('POST', 'send.php', true);\n      xhr.send(formData);\n    }\n\n    /*===================================================================*/\n\n    function checkForm(form, e) {\n      e.preventDefault();\n\n      var\n        whisperer = form.querySelector('input[hidden]'),\n        name = form.querySelector('input[name=\"name\"]'),\n        pass = form.querySelector('input[type=\"password\"]'),\n        url = form.querySelector('input[type=\"url\"]'),\n        mail = form.querySelector('input[type=\"email\"]'),\n        phone = form.querySelector('input[type=\"tel\"]'),\n        num = form.querySelector('input[type=\"number\"]'),\n        date = form.querySelector('input[type=\"date\"]'),\n        allFields = [name, pass, url, mail, phone, num, date],\n        hasError = [];\n\n      allFields.forEach(function(el) {\n        if (el !== null && el.name === 'name') {\n          var test = /^([a-zа-яё]+)(\\s[a-zа-яё]+)?$/i.test(name.value) && name.value.length >= 3;\n          if (!addStyles(el, test)) hasError.push(el);\n        }\n        if (el !== null && el.type === 'password') {\n          var test = /^(?=(?:.*?\\d){1})(?=(?:.*?[A-Z]))(?=(?:.*?[a-z]))\\w{1,}$/.test(pass.value) && 6 <= pass.value.length;\n          if (!addStyles(el, test)) hasError.push(el);\n        }\n        if (el !== null && el.type === 'url') {\n          var test = /^(((https?|ftp)\\:\\/\\/)?([\\w-]+\\.)?([\\w-])+\\.(\\w)+\\/?[\\w\\?\\.\\=\\&\\-\\#\\+\\/]+)$/.test(url.value);\n          if (!addStyles(el, test)) hasError.push(el);\n        }\n        if (el !== null && el.type === 'email') {\n          var test = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(mail.value);\n          if (!addStyles(el, test)) hasError.push(el);\n        }\n        if (el !== null && el.type === 'tel') {\n          var test = /^\\(\\d{3}\\)\\s\\d{3}(\\-\\d{2}){2}$/.test(phone.value);\n          if (!addStyles(el, test)) hasError.push(el);\n        }\n        if (el !== null && el.type === 'number') {\n          var test = /^[\\d]+([.|,][\\d])?$/.test(num.value) && 3 >= num.value.length; // For it's work well with decimals input must have attribute step.\n          if (!addStyles(el, test)) hasError.push(el);\n        }\n        if (el !== null && el.type === 'date') {\n          var test = /^\\d{4}(\\-\\d{2}){2}$/.test(date.value);\n          if (!addStyles(el, test)) hasError.push(el);\n        }\n      });\n\n      if (hasError.length !== 0) form.classList.add('formError');\n      else if (whisperer.value.length !== 0) return;\n      else sendRequest(form);\n\n      setTimeout(function() {\n        form.classList.remove('formError');\n      }, 600);\n    }\n\n    /*===================================================================*/\n\n    forms.forEach(function(form) {\n      form.setAttribute('novalidate', true);\n      form.addEventListener('submit', checkForm.bind(form, form));\n\n      resets.forEach(function(reset) {\n        reset.addEventListener('click', removeStyles.bind('reset', form));\n      });\n    });\n  });\n})();"]}